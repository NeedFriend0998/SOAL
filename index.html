<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>KUIS Pernapasan</title>
</head>
<body>
<h1>Soal campuran</h1>
<p></p>
<p></p>
<script>
var soal_jawaban = [
    {"soal": "apa fungsi Trakea?", "jawaban": ["menangkap benda asing yang masuk ke pernapasan", "menyaring debu jika masuk ke pernapasan", "menangkap benda asing jika masuk pernapasan", "menyaring debu yang masuk pernapasan", "menangkap benda asing yang masuk ke pernapasan", "menyaring benda asing yang masuk ke pernapasan", "menyaring benda asing yang masuk pernapasan"]},
    {"soal": "apa fungsi Bronkus?", "jawaban": ["sebagai saluran udara"]},
    {"soal": "apa fungsi Bronkiolus?", "jawaban": ["tempat tersusunnya banyak pembuluh kapiler", "tersusunnya banyak pembuluh kapiler"]},
    {"soal": "apa fungsi paruÂ²?", "jawaban": ["organ pernapasan utama"]},
    {"soal": "apa fungsi faring?", "jawaban": ["meneruskan udara setelah ke rongga hidung", "meneruskan udara dari rongga hidung"]},
    {"soal": "apa fungsi rongga hidung?", "jawaban": ["menyaring udara yang masuk", "menyaring udara", "menghirup oksigen", "bernapas"]}
];
function normalize(text) {
    return (text || "").toLowerCase().trim().replace(/[^0-9a-z\s]/g, '').replace(/\s+/g, ' ');
}
function quiz() {
    var jumlah = parseInt(prompt("Mau berapa soal? (misal 10):", "10")) || 10;
    var skor = 0, last = null, asked = 0;
    var salah_list = [];
    for (var i = 1; i <= jumlah; i++) {
        asked++;
        var item;
        do {
            item = soal_jawaban[Math.floor(Math.random()*soal_jawaban.length)];
        } while (item === last);
        last = item;
        var jawaban = prompt("Soal " + i + "/" + jumlah + ": " + item.soal);
        if (jawaban === null || jawaban.toLowerCase() === "exit") {
            alert("Keluar dari kuis...");
            break;
        }
        var u = normalize(jawaban);
        var correct = item.jawaban.some(ans => normalize(ans) === u);
        if (correct) {
            alert("âœ… Benar!");
            skor++;
        } else {
            alert("âŒ Salah. Jawaban benar: " + item.jawaban[0]);
            salah_list.push({
                soal: item.soal,
                jawaban_user: jawaban,
                jawaban_benar: item.jawaban
            });
        }
    }
    var percent = (skor/asked)*100;
    var msg = "=== HASIL AKHIR ===\nSkor: " + skor + "/" + asked + "\nPersentase: " + percent.toFixed(2) + "%";
    if (salah_list.length) {
        msg += "\n\nSoal yang salah:\n";
        for (var k = 0; k < salah_list.length; k++) {
            var s = salah_list[k];
            msg += (k+1) + ". " + s.soal + "\n   Jawaban kamu: " + s.jawaban_user + "\n   Jawaban benar: " + s.jawaban_benar.join(", ") + "\n";
        }
    } else {
        msg += "\n\nMantap! Semua benar ğŸ‰";
    }
    alert(msg);
}
quiz();
</script>
</body>
</html>